<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Profile - Achille Songa</title>
    <link
      rel="icon"
      type="image/png"
      sizes="32x32"
      href="../img/mylogo.png"
    />
    <link href="https://fonts.googleapis.com/css?family=Roboto:300,400" rel="stylesheet">
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css" integrity="sha384-mzrmE5qonljUremFsqc01SB46JvROS7bZs3IO2EmfFsd15uHvIt+Y8vEf7N7fWAU"
        crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" href="../css/style.css">
    <link rel="stylesheet" type="text/css" href="../css/profile.css">
    <link rel="stylesheet" type="text/css" href="../css/feeds.css">
    <link rel="stylesheet" type="text/css" href="../css/responsive.css">
    <link rel="stylesheet" type="text/css" href="../css/blog-watch.css">
    <script src="../js/profile-sections.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.0.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.0.0/firebase-firestore.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.0.0/firebase-storage.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.0.0/firebase-auth.js"></script>
    <script src="../js/firebase.js"></script>
    <script src="../js/dashboard.js"></script>
    <script src="../js/auth.js"></script>
    
</head>
<body>
    <!--Profile page-->
    <div id="blog" class="blog">
        <div class="top">
                <h1><a href="../index.html" style="color: #008073;text-decoration: none;">Achille Songa</a></h1>
        </div>
        <h2>
            <div class="goto">
                <a href="../index.html" style="text-decoration: none;color:aliceblue;"><span><img src="../img/arrow-91-xl.png"></span> &nbsp;&nbsp;&nbsp;Home</a>
            </div>
        </h2>
        <div class="profile" id="profile">

            <!--Making the dynamic landing page-->
            <div class="namepic">
                <script>
                    function inDash(doc){
                        let myNameRole = document.querySelector('.myNameRole');
                        let imginDash = document.querySelector('.imgInDash');
                        let slogan = document.querySelector('#mySlogan');

                        imginDash.src = doc.image;
                        myNameRole.textContent = doc.myName+' | '+doc.myRole;
                        slogan.textContent= doc.landingtext;

                    }
                    db.collection('profile').doc('homepage').get().then((doc)=>{
                        inDash(doc.data())
                    })


                </script>
                <div>
                    <img src="" class="imgInDash">
                    <div class="man-nav">
                        <a href="#man-main" onclick="mainPage()" id="mainpage">Main page</a>
                        <a href="#man-skills" onclick="skillsPage()" id="skillpage">Skills</a>
                        <a href="#man-about" onclick="aboutPage()" id="aboutpage">About</a>
                        <a href="#man-project" onclick="projectPage()" id="projectpage">Projects</a>
                        <a href="#man-experience" onclick="expertPage()" id="expertpage">Experience</a>
                        <a href="#man-contact" onclick="contactPage()" id="contactpage">Queries</a>
                    </div> 
                </div>
                <div>
                    <h3 class="myNameRole"></h3>
                    <p id="mySlogan"></p>
                    <h4>Views: 67      |      Visitors: 10</h4>
                    <div class="buttonss"><button><a href="../blog/modify.html">Manage a blog</a></button><button ><a id="logOutBtn">Log out</a></button></div>
                    <script>
                        let logoutbtn = document.querySelector('#logOutBtn');
                        
                        logoutbtn.addEventListener('click', (e)=>{
                            e.preventDefault();
                            auth.signOut();
                        })
                    </script>
                    <p id="aboutDemo"> ABOUT ME:
                        <h5 id="aboutHeadingDash"></h5><br>
                        <p id="aboutContentDash"></p><br>
                    </p>
                    <p>SKILLS:
                        <div id="skillsInDash">
                        <style>
                            #skillsInDash{
                                display: grid;
                                grid-template-columns: 25% 25% 25%;
                                grid-gap: 8%;
                                justify-content: center;
                            }
                            @media(max-width:960px){
                                #skillsInDash{
                                display: flex;
                                flex-wrap: wrap;
                                justify-content: space-between;
                                }
                            }
                        </style>
                        <script>
                            function skillsInDash(doc){
                            let skillDashContainer = document.querySelector('#skillsInDash');
                            let skillWrap = document.createElement('div');
                            let skillImage = document.createElement('img');
                            let skillTitle = document.createElement('h1');

                            skillImage.src = doc.image;
                            skillTitle.textContent = doc.title;

                            skillWrap.appendChild(skillImage);
                            skillWrap.appendChild(skillTitle);

                            skillDashContainer.appendChild(skillWrap);

                            //styling div

                            skillWrap.style.width = "100%";
                            skillWrap.style.border = "1px solid #008073";
                            skillWrap.style.padding = "10px";
                            skillWrap.style.textAlign = "center";

                        }

                        db.collection('skills').get().then((snapshot)=> {
                                snapshot.docs.forEach(doc=>{
                                skillsInDash(doc.data())
                            })
                        })
                        </script>
                        </div>
                    </p>
                    <p>PROJECTS:
                        <div id="projectsInDash" class="projects">
                            <div class="dash-wrapper">
                                <div class="dashwrap-item">
                                    <img src="" id="proImageInDash">
                                    <a href="../index.html#projects" style="background-color: #008073;padding: 10px;color: aliceblue;width: 100%;" target="_blank">View more Projects</a>
                                    <div>
                                        <h1><a href=""  id="proNameDash"></a></h1>
                                        <h5 id="descDashPro"></h5>
                                        
                                    </div>
                                    
                                </div>
                            </div>
                            
                        </div>
                        
                    </p>
                    <p>EXPERIENCE:
                        <div id="projectsInDash" class="projects">
                            <div class="dash-wrapper">
                                <div class="dashwrap-item">
                                    <img src="" id="expertImageInDash">
                                    <a href="../index.html#experience" style="background-color: #008073;padding: 10px;color: aliceblue;width: 100%;" target="_blank">Check more experience</a>
                                    <div>
                                        <h1 id="expertNameDash"></h1>
                                        <h5 id="descDashExpert"></h5>
                                        
                                    </div>
                                    
                                </div>
                            </div>
                            
                        </div>
                        
                    </p>
                </div>
                
                
            </div>
            <div class="hhh">
            <div class="manageweb">
                <section id="man-main">      
                    <h2>Homepage appearance</h2>    
                    <div style="display: flex;flex-wrap: wrap;" class="man-main-div1">
                        <form id="updateLanding">
                            
                            <label for="myName">Change my Name</label>
                            <input type="text" id="myName">
                            <label for="myRole">Change the role</label>
                            <input type="text" id="myRole">
                            <label for="mySlogan">Change my slogan</label>
                            <input type="text" id="mySlogan">
                            <label for="myPicture">Change my profile image</label>
                            <input type="file" id="myPicture">
                            <center><button>Update</button></center>
                            
                        </form>
                        <script>
                            // uploading data for homepage to database
                            const landingUpdateForm = document.querySelector('#updateLanding');


                            function updateProfileDetails(){
                                //get image
                                const image = document.querySelector('#myPicture').files[0];
                                const imageName = image.name;
                                //ref to root storage + image storage
                                var storageRef = firebase.storage().ref('images/profile/'+imageName);
                                //upload image to selected storage
                                const uploadTask = storageRef.put(image);
                                //get upload progress
                                uploadTask.on('state_changed', function(snapshot){
                                //get progress
                                const progress = snapshot.bytestransferred/snapshot.totalBytes *100;
                                    console.log("Upload is " +progress+ " done");
                                }, function(error){
                                    //handle errors
                                    console.log(error.message);
                                }, function(){
                                    //handle successful upload
                                    let today = new Date();

                                    let dateOfToday = today.getFullYear()+'-'+(today.getMonth()+1)+'-'+today.getDate();
                                    uploadTask.snapshot.ref.getDownloadURL().then(function(downloadURL){
                                    db.collection('profile').doc('homepage').update({
                                        image: downloadURL,
                                        myName: landingUpdateForm.myName.value,
                                        myRole: landingUpdateForm.myRole.value,
                                        landingtext: landingUpdateForm.mySlogan.value,
                                        date: dateOfToday
                                    }).then(function(){
                                        alert('Successfuly updated!');
                                        landingUpdateForm.reset();
                                        return false;
                                    })
            
            
                                });
                            });
      
                            };
                            landingUpdateForm.addEventListener('submit', (e)=>{
                                e.preventDefault();
                                console.log|("It's working");
                                updateProfileDetails();
                            })
                            </script>
                    </div>
                </section>
                <section id="man-skills">  
                    <h2>Add or Update skills</h2>           
                    <div class="man-skills-div2">
                        <form id="skillsAddForm">
                            <label>Skills title</label>
                            <input type="text" id="skillTitle">
                            <label>Choose category</label>
                            <select id="categorySkill">
                                <option>Front-End</option>
                                <option>Back-End</option>
                                <option>CMS</option>
                                <option>Other</option>
                            </select>
                            <label>Add an image</label>
                            <input type="file" id="skillImage">
                            <button id="skill-add">Add skill</button>
                        </form>
                    </div>
                    <script>
                    // Add new skills
                    let formAddSkill = document.querySelector('#skillsAddForm');
function addSkillDetails(){
    //get image
    
    const image = document.querySelector('#skillImage').files[0];
    const imageName = image.name;
    //ref to root storage + image storage
    var storageRef = firebase.storage().ref('images/skills/'+imageName);
    //upload image to selected storage
    const uploadTask = storageRef.put(image);
    //get upload progress
    uploadTask.on('state_changed', function(snapshot){
    //get progress
    const progress = snapshot.bytestransferred/snapshot.totalBytes *100;
        console.log("Upload is " +progress+ " done");
    }, function(error){
        //handle errors
        console.log(error.message);
    }, function(){
        //handle successful upload
        let today = new Date();

        let dateOfToday = today.getFullYear()+'-'+(today.getMonth()+1)+'-'+today.getDate();
        uploadTask.snapshot.ref.getDownloadURL().then(function(downloadURL){
        db.collection('skills').add({
            image: downloadURL,
            title: formAddSkill.skillTitle.value,
            category: skillsAddForm.categorySkill.value,
            date: dateOfToday
        }).then(function(){
            alert('Successfuly Added!');
            formAddSkill.reset();
            return false;
        })


    });
});

};
formAddSkill.addEventListener('submit', (e)=>{
    e.preventDefault();
    console.log("It's working");
    addSkillDetails();
})
</script>
                </section>
                <section id="man-about">             
                    <h2>Update my About</h2>
                    <div class="man-about-div3">
                        <form id="addabout">
                            <label>Heading</label>
                            <input type="text" id="aboutheadingEdit">
                            <label>Main about</label>
                            <textarea id="mainaboutEdit"></textarea>
                            <button id="about-add">Update about</button>
                        </form>
                    </div>
<script>
//update about
let updateAboutButton = document.querySelector("#about-add");

updateAboutButton.addEventListener('click', (e)=>{
    e.preventDefault();
    console.log('Done');
    db.collection('profile').doc('aboutme').update({
        heading: aboutheadingEdit.value,
        about: mainaboutEdit.value
    })
    alert('Successfuly updated!');
})
</script>
                </section>
                <!--PROJECT MANAGEMENT-->
                <section id="man-project">    
                    <h2>Manage Projects</h2>         
                    <div class="man-project-div4">
                        <form id="projectAddFrorm">
                            <label>Project title</label>
                            <input type="text" id="proName">
                            <label>Project link</label>
                            <input type="url" id="proLink">
                            <label>Add an image</label>
                            <input type="file" id="proImage">
                            <label>Description</label>
                            <textarea id="proDesc"></textarea>
                            <button id="project-add">Add a project</button>
                        </form>
                    </div>





                    <script>
                    // add mew project
let projectUpdateButton = document.getElementById('project-add');
let projectNameAdd = document.getElementById('proName');
let projectLinkAdd = document.getElementById('proLink');
let projectDescAdd = document.getElementById('proDesc');
let projectUpdateForm = document.getElementById('projectAddForm');



    function addNewProject(){
        //get image
        const image = document.querySelector('#proImage').files[0];
        const imageName = image.name;
        //ref to root storage + image storage
        var storageRef = firebase.storage().ref('images/projects/'+imageName);
        //upload image to selected storage
        const uploadTask = storageRef.put(image);
        //get upload progress
        uploadTask.on('state_changed', function(snapshot){
        //get progress
        const progress = snapshot.bytestransferred/snapshot.totalBytes *100;
            console.log("Upload is " +progress+ " done");
        }, function(error){
            //handle errors
            console.log(error.message);
        }, function(){
            //handle successful upload
            let today = new Date();

            let dateOfToday = today.getFullYear()+'-'+(today.getMonth()+1)+'-'+today.getDate();
                uploadTask.snapshot.ref.getDownloadURL().then(function(downloadURL){
                    db.collection('projects').add({
                        image: downloadURL,
                        projectName: projectNameAdd.value,
                        link: projectLinkAdd.value,
                        description: projectDescAdd.value,
                        date: dateOfToday
                    }).then(function(){
                        alert('Successfuly added!');
                        return false;
                    })
            
            
                });
        });
      
    };
        projectUpdateButton.addEventListener('click', (e)=>{
            e.preventDefault();
            console.log("It's working");
            addNewProject();
            projectUpdateForm.reset();
        })

    </script>
                </section>



                <!--Manage experience-->
                <section id="man-experience"> 
                    <h2>Manage experience</h2>            
                        <form id="manageExpert">
                            <label>Experience Title</label>
                            <input type="text" id="experttitle">
                            <label>Add an image</label>
                            <input type="file" id="expertImage">
                            <label>Description</label>
                            <textarea id="expertDesc"></textarea>
                            <button id="expert-add">Add experience</button>
                        </form>
                </section>
                <script>
                    // add mew project
let expertUpdateButton = document.getElementById('expert-add');
let experttitle = document.getElementById('experttitle');
let expertimage = document.getElementById('expertImage');
let expertdesc = document.getElementById('expertDesc');
let expertUpdateForm = document.getElementById('manageExpert');



    function addNewExpert(){
        //get image
        const image = document.querySelector('#expertImage').files[0];
        const imageName = image.name;
        //ref to root storage + image storage
        var storageRef = firebase.storage().ref('images/experience/'+imageName);
        //upload image to selected storage
        const uploadTask = storageRef.put(image);
        //get upload progress
        uploadTask.on('state_changed', function(snapshot){
        //get progress
        const progress = snapshot.bytestransferred/snapshot.totalBytes *100;
            console.log("Upload is " +progress+ " done");
        }, function(error){
            //handle errors
            console.log(error.message);
        }, function(){
            //handle successful upload
            let today = new Date();

            let dateOfToday = today.getFullYear()+'-'+(today.getMonth()+1)+'-'+today.getDate();
                uploadTask.snapshot.ref.getDownloadURL().then(function(downloadURL){
                    db.collection('experience').add({
                        image: downloadURL,
                        title: experttitle.value,
                        description: expertdesc.value,
                        date: dateOfToday
                    }).then(function(){
                        alert('Successfuly added!');
                        expertUpdateForm.reset();
                        return false;
                    })
            
            
                });
        });
      
    };
        expertUpdateButton.addEventListener('click', (e)=>{
            e.preventDefault();
            console.log("It's working");
            addNewExpert();
        })

    </script>



                <section id="man-contact">    
                    <h2>Queries</h2>         
                    <div id="cont-div4">
                        <div class="message-con">
                            <!--<div class="name-date"><p>Jane Doe &nbsp; - &nbsp; 10 october 2020</p></div>
                            <hr>
                            <h5>Lorem ipsum dolor sit amet consectetur, adipisicing elit. Quidem porro aperiam asperiores accusamus maiores iusto?</h5>-->
                            
                        </div>
                        
                    </div>
                </section>
            </div>
        </div>   
    </div>
        <!--Footer section-->
        <div class="footer" style="position: fixed;bottom: 0;">
            <div class="foot">
                <div class="copyright">
                    <p><a href="../index.html" style="text-decoration: none;color: aliceblue;">&copy;  Achille Songa</a></p>
                </div>
                <div class="sms">
                    <a href="https://instagram.com/achille_songa">Instagram</a>
                    <a href="https://fb.me/songa.achille.9">Facebook</a>
                    <a href="https://twitter.com/mindinmiddle">Twitter</a>
                </div>
                
            </div>
        </div>
    </div>
    <!--Reference to my firebase console-->
    
</body>
</html>