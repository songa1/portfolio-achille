<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Profile - Achille Songa</title>
    <link
      rel="icon"
      type="image/png"
      sizes="32x32"
      href="../img/mylogo.png"
    />
    <link href="https://fonts.googleapis.com/css?family=Roboto:300,400" rel="stylesheet">
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css" integrity="sha384-mzrmE5qonljUremFsqc01SB46JvROS7bZs3IO2EmfFsd15uHvIt+Y8vEf7N7fWAU"
        crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" href="../css/style.css">
    <link rel="stylesheet" type="text/css" href="../css/profile.css">
    <link rel="stylesheet" type="text/css" href="../css/feeds.css">
    <link rel="stylesheet" type="text/css" href="../css/responsive.css">
    <link rel="stylesheet" type="text/css" href="../css/blog-watch.css">
    <script src="../js/profile-sections.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.0.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.0.0/firebase-firestore.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.0.0/firebase-storage.js"></script>
    <script src="../js/firebase.js"></script>
    <script src="../js/dashboard.js"></script>
    
</head>
<body>
    <!--Profile page-->
    <div id="blog" class="blog">
        <div class="top">
                <h1><a href="../index.html" style="color: #008073;text-decoration: none;">Achille Songa</a></h1>
        </div>
        <h2>
            <div class="goto">
                <a href="../index.html" style="text-decoration: none;color:aliceblue;"><span><img src="../img/arrow-91-xl.png"></span> &nbsp;&nbsp;&nbsp;Home</a>
            </div>
        </h2>
        <div class="profile" id="profile">

            <!--Making the dynamic landing page-->
            <div class="namepic">
                <script>
                    function inDash(doc){
                        let myNameRole = document.querySelector('.myNameRole');
                        let imginDash = document.querySelector('.imgInDash');
                        let slogan = document.querySelector('#mySlogan');

                        imginDash.src = doc.image;
                        myNameRole.textContent = doc.myName+' | '+doc.myRole;
                        slogan.textContent= doc.landingtext;

                    }
                    db.collection('landing-page').doc('GvsCpto5XsDyhf0lpMaP').get().then((doc)=>{
                        inDash(doc.data())
                    })


                </script>
                <div>
                    <img src="" class="imgInDash">
                </div>
                <div>
                    <h3 class="myNameRole"></h3>
                    <p id="mySlogan"></p>
                    <h4>Views: 67      |      Visitors: 10</h4>
                    <div class="buttons"><button><a href="../blog/modify.html">Manage a blog</a></button><button>Log out</button></div>
                </div>
                
                
            </div>
            <div class="hhh">
            <div class="manageweb">
                <div class="man-nav">
                    <a href="#man-main" onclick="mainPage()" id="mainpage">Main page</a>
                    <a href="#man-skills" onclick="skillsPage()" id="skillpage">Skills</a>
                    <a href="#man-about" onclick="aboutPage()" id="aboutpage">About</a>
                    <a href="#man-project" onclick="projectPage()" id="projectpage">Projects</a>
                    <a href="#man-experience" onclick="expertPage()" id="expertpage">Experience</a>
                    <a href="#man-contact" onclick="contactPage()" id="contactpage">Queries</a>
                </div> 
                <section id="man-main">          
                    <div style="display: flex;flex-wrap: wrap;" class="man-main-div1">
                        <form id="updateLanding">
                            <h2>Updating Landing page</h2>
                            <label for="myName">Change my Name</label>
                            <input type="text" id="myName">
                            <label for="myRole">Change the role</label>
                            <input type="text" id="myRole">
                            <label for="mySlogan">Change my slogan</label>
                            <input type="text" id="mySlogan">
                            <label for="myPicture">Change my profile image</label>
                            <input type="file" id="myPicture">
                            <center><button>Update</button></center>
                            
                        </form>
                        <script>
                            // uploading data for homepage to database
                            const landingUpdateForm = document.querySelector('#updateLanding');


                            function updateProfileDetails(){
                                //get image
                                const image = document.querySelector('#myPicture').files[0];
                                const imageName = image.name;
                                //ref to root storage + image storage
                                var storageRef = firebase.storage().ref('images/profile/'+imageName);
                                //upload image to selected storage
                                const uploadTask = storageRef.put(image);
                                //get upload progress
                                uploadTask.on('state_changed', function(snapshot){
                                //get progress
                                const progress = snapshot.bytestransferred/snapshot.totalBytes *100;
                                    console.log("Upload is " +progress+ " done");
                                }, function(error){
                                    //handle errors
                                    console.log(error.message);
                                }, function(){
                                    //handle successful upload
                                    let today = new Date();

                                    let dateOfToday = today.getFullYear()+'-'+(today.getMonth()+1)+'-'+today.getDate();
                                    uploadTask.snapshot.ref.getDownloadURL().then(function(downloadURL){
                                    db.collection('landing-page').doc('GvsCpto5XsDyhf0lpMaP').update({
                                        image: downloadURL,
                                        myName: landingUpdateForm.myName.value,
                                        myRole: landingUpdateForm.myRole.value,
                                        landingtext: landingUpdateForm.mySlogan.value,
                                        date: dateOfToday
                                    }).then(function(){
                                        alert('Successfuly updated!');
                                        landingUpdateForm.reset();
                                        return false;
                                    })
            
            
                                });
                            });
      
                            };
                            landingUpdateForm.addEventListener('submit', (e)=>{
                                e.preventDefault();
                                console.log|("It's working");
                                updateProfileDetails();
                            })
                            </script>
                    </div>
                </section>
                <h2 id="skills-titles">Manage skills</h2> 
                <section id="man-skills">             
                    <div style="display: flex;flex-wrap: wrap;" class="man-skills-div2">
                        <div class="skill-added">
                            <p><b>1</b></p>
                            <p><b>JS</b></p>
                            <p><b>Front-end</b></p>
                            <img src="../img/javascript.png">
                            <p><button>Edit</button></p>
                        </div>
                    </div>
                    <div class="man-skills-div2">
                        <form id="">
                            <label>Skills title</label>
                            <input type="text">
                            <label>Choose category</label>
                            <select>
                                <option>Front-end</option>
                                <option>Back-end</option>
                                <option>CMS</option>
                                <option>Other skills</option>
                            </select>
                            <label>Add an image</label>
                            <input type="file">
                            <button id="skill-add">Add skill</button>
                        </form>
                    </div>
                </section>
                <h2 id="about-titles">Manage about</h2> 
                <section id="man-about">             
                    <div style="display: flex;flex-wrap: wrap;" class="man-about-div3">
                        <div class="about-added">
                            <h1>This is the heading</h1>
                            <h4>Lorem ipsum, dolor sit amet consectetur adipisicing elit. Rerum rem nam sed, deleniti assumenda, enim esse ipsa incidunt voluptas reprehenderit earum alias, facere quis! Distinctio exercitationem dolorum nulla! Facere fugiat error totam. Odit eius temporibus dicta atque, incidunt illo eos!</h4>
                            <p>Edit</p>
                        </div>
                    </div>
                    <div class="man-about-div3">
                        <form>
                            <label>Heading</label>
                            <input type="text">
                            <label>Main about</label>
                            <textarea></textarea>
                            <button id="skill-add">Update about</button>
                        </form>
                    </div>
                </section>
                <h2 id="project-titles">Manage projects</h2> 
                <section id="man-project">             
                    <div style="display: flex;flex-wrap: wrap;" class="man-project-div4">
                        <div class="project-added">
                            <p><b>1</b></p>
                            <p><b><a href="#">Manwel</a></b></p>
                            <p><b>Lorem ipsum dolor sit amet consectetur adipisicing elit. Pariatur error repellat aliquid libero exercitationem rerum similique non deserunt, vitae quam, ea maxime voluptates quod veniam tenetur culpa sequi eligendi magni!</b></p>
                            <img src="../img/andela.png">
                            <p><button>Edit</button></p>
                        </div>
                        <div class="project-added">
                            <p><b>2</b></p>
                            <p><b><a href="#">Manwel</a></b></p>
                            <p><b>Lorem ipsum dolor sit amet consectetur adipisicing elit. Pariatur error repellat aliquid libero exercitationem rerum similique non deserunt, vitae quam, ea maxime voluptates quod veniam tenetur culpa sequi eligendi magni!</b></p>
                            <img src="../img/andela.png">
                            <p><button>Edit</button></p>
                        </div>
                    </div>
                    <div class="man-project-div4">
                        <form>
                            <label>Project title</label>
                            <input type="text">
                            <label>Project link</label>
                            <input type="url">
                            <label>Add an image</label>
                            <input type="file">
                            <label>Description</label>
                            <textarea></textarea>
                            <button id="skill-add">Add a project</button>
                        </form>
                    </div>
                </section>
                <h2 id="expert-titles">Manage experience</h2> 
                <section id="man-experience">             
                    <div style="display: flex;flex-wrap: wrap;" class="man-project-div4">
                        <div class="project-added">
                            <p><b>1</b></p>
                            <p><b><a href="#">Software engineer</a></b></p>
                            <p><b>Lorem ipsum dolor sit amet consectetur adipisicing elit. Pariatur error repellat aliquid libero exercitationem rerum similique non deserunt, vitae quam, ea maxime voluptates quod veniam tenetur culpa sequi eligendi magni!</b></p>
                            <img src="../img/andela.png">
                            <p><button>Edit</button></p>
                        </div>
                        <div class="project-added">
                            <p><b>2</b></p>
                            <p><b><a href="#">Graphic designer</a></b></p>
                            <p><b>Lorem ipsum dolor sit amet consectetur adipisicing elit. Pariatur error repellat aliquid libero exercitationem rerum similique non deserunt, vitae quam, ea maxime voluptates quod veniam tenetur culpa sequi eligendi magni!</b></p>
                            <img src="../img/andela.png">
                            <p><button>Edit</button></p>
                        </div>
                    </div>
                    <div class="man-project-div4">
                        <form>
                            <label>Experience heading</label>
                            <input type="text">
                            <label>A link if any</label>
                            <input type="url">
                            <label>Add an image</label>
                            <input type="file">
                            <label>Description</label>
                            <textarea></textarea>
                            <button id="skill-add">Add experience</button>
                        </form>
                    </div>
                </section>
                <h2 id="contact-titles">View queries</h2> 
                <section id="man-contact">             
                    <div class="man-project-div4" id="cont-div4">
                        <div class="message-con">
                            <!--<div class="name-date"><p>Jane Doe &nbsp; - &nbsp; 10 october 2020</p></div>
                            <hr>
                            <h5>Lorem ipsum dolor sit amet consectetur, adipisicing elit. Quidem porro aperiam asperiores accusamus maiores iusto?</h5>-->
                            
                        </div>
                        
                    </div>
                </section>
            </div>
        </div>   
    </div>
        <!--Footer section-->
        <div class="footer" style="position: fixed;bottom: 0;">
            <div class="foot">
                <div class="copyright">
                    <p><a href="../index.html" style="text-decoration: none;color: aliceblue;">&copy;  Achille Songa</a></p>
                </div>
                <div class="sms">
                    <a href="https://instagram.com/achille_songa">Instagram</a>
                    <a href="https://fb.me/songa.achille.9">Facebook</a>
                    <a href="https://twitter.com/mindinmiddle">Twitter</a>
                </div>
                
            </div>
        </div>
    </div>
    <!--Reference to my firebase console-->
    
</body>
</html>